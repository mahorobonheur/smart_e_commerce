<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<AnchorPane xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.example.smartecommercesystem.controller.DashboardController">
    <children>
        <BorderPane AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
            <!-- Top Navbar: Dark sky blue with minimal blue usage -->
            <top>
                <HBox spacing="20" style="-fx-background-color: #4682B4; -fx-border-color: #3A6D9A; -fx-border-width: 0 0 1 0;" prefHeight="60" alignment="CENTER_LEFT">
                    <padding>
                        <Insets top="10" right="20" bottom="10" left="20"/>
                    </padding>
                    <children>
                        <Label text="SMART E-COMMERCE" style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <TextField fx:id="searchField" promptText="Search..." style="-fx-background-color: white; -fx-background-radius: 20; -fx-padding: 8 15 8 15; -fx-border-radius: 20;" prefWidth="200"/>
                        <Label fx:id="welcomeLabel" text="Welcome" style="-fx-text-fill: white; -fx-font-size: 14px;"/>
                        <Button text="Logout" onAction="#logout" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-padding: 8 15 8 15;"/>
                    </children>
                </HBox>
            </top>

            <!-- Left Sidebar: Neutral light gray, buttons with dark sky blue accents only on hover (suggest CSS) -->
            <left>
                <VBox spacing="20" style="-fx-background-color: #f8f9fa;" minWidth="200" maxWidth="250">
                    <padding>
                        <Insets top="25" right="15" bottom="25" left="15"/>
                    </padding>
                    <children>
                        <Button text="Dashboard" maxWidth="Infinity" style="-fx-background-color: transparent; -fx-text-fill: #4682B4; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 12; -fx-border-color: #4682B4; -fx-border-width: 1; -fx-border-radius: 8;"/>
                        <Button text="Products" onAction="#showProducts" maxWidth="Infinity" style="-fx-background-color: transparent; -fx-text-fill: #4682B4; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 12; -fx-border-color: #4682B4; -fx-border-width: 1; -fx-border-radius: 8;"/>
                        <Button text="Orders" onAction="#showOrders" maxWidth="Infinity" style="-fx-background-color: transparent; -fx-text-fill: #4682B4; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 12; -fx-border-color: #4682B4; -fx-border-width: 1; -fx-border-radius: 8;"/>
                        <Button text="Categories" onAction="#showCategories" maxWidth="Infinity" style="-fx-background-color: transparent; -fx-text-fill: #4682B4; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 12; -fx-border-color: #4682B4; -fx-border-width: 1; -fx-border-radius: 8;"/>
                        <Button text="Cart" onAction="#showCart" maxWidth="Infinity" style="-fx-background-color: transparent; -fx-text-fill: #4682B4; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 12; -fx-border-color: #4682B4; -fx-border-width: 1; -fx-border-radius: 8;"/>
                        <Button text="Reviews" onAction="#showReviews" maxWidth="Infinity" style="-fx-background-color: transparent; -fx-text-fill: #4682B4; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 12; -fx-border-color: #4682B4; -fx-border-width: 1; -fx-border-radius: 8;"/>
                    </children>
                </VBox>
            </left>

            <!-- Center Content: Light background, minimized blue -->
            <center>
                <VBox spacing="30" fillWidth="true" style="-fx-background-color: #f5f5f5;">
                    <padding>
                        <Insets top="30" right="30" bottom="30" left="30"/>
                    </padding>
                    <!-- Stats Cards: FlowPane for wrapping, minimal blue borders/text -->
                    <FlowPane hgap="20" vgap="20" alignment="TOP_CENTER" prefWrapLength="Infinity">
                        <VBox spacing="10" alignment="CENTER" minWidth="180" prefWidth="220" prefHeight="120"
                              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 4, 0, 0, 1);">
                            <Label text="Products" style="-fx-font-size: 16px; -fx-text-fill: #2c3e50; -fx-font-weight: bold;"/>
                            <Label fx:id="productsCountLabel" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #4682B4;"/>
                        </VBox>

                        <VBox spacing="10" alignment="CENTER" minWidth="180" prefWidth="220" prefHeight="120"
                              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 4, 0, 0, 1);">
                            <Label text="Orders" style="-fx-font-size: 16px; -fx-text-fill: #2c3e50; -fx-font-weight: bold;"/>
                            <Label fx:id="ordersCountLabel" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #4682B4;"/>
                        </VBox>

                        <VBox spacing="10" alignment="CENTER" minWidth="180" prefWidth="220" prefHeight="120"
                              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 4, 0, 0, 1);">
                            <Label text="Revenue" style="-fx-font-size: 16px; -fx-text-fill: #2c3e50; -fx-font-weight: bold;"/>
                            <Label fx:id="revenueLabel" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #4682B4;"/>
                        </VBox>

                        <VBox spacing="10" alignment="CENTER" minWidth="180" prefWidth="220" prefHeight="120"
                              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 4, 0, 0, 1);">
                            <Label text="Customers" style="-fx-font-size: 16px; -fx-text-fill: #2c3e50; -fx-font-weight: bold;"/>
                            <Label fx:id="customersCountLabel" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #4682B4;"/>
                        </VBox>

                        <VBox spacing="10" alignment="CENTER" minWidth="180" prefWidth="220" prefHeight="120"
                              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 4, 0, 0, 1);">
                            <Label text="Avg Order Value" style="-fx-font-size: 16px; -fx-text-fill: #2c3e50; -fx-font-weight: bold;"/>
                            <Label fx:id="avgOrderValueLabel" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #4682B4;"/>
                        </VBox>

                        <VBox spacing="10" alignment="CENTER" minWidth="180" prefWidth="220" prefHeight="120"
                              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 4, 0, 0, 1);">
                            <Label text="Low Stock Products" style="-fx-font-size: 16px; -fx-text-fill: #2c3e50; -fx-font-weight: bold;"/>
                            <Label fx:id="lowStockProductsLabel" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #4682B4;"/>
                        </VBox>
                    </FlowPane>

                    <!-- Products Table Section: Improved with cleaner styling, no blue borders -->
                    <VBox spacing="10" VBox.vgrow="ALWAYS">
                        <Label text="Products Overview" style="-fx-font-size: 20px; -fx-text-fill: #2c3e50; -fx-font-weight: bold;"/>
                        <TableView fx:id="productTable" style="-fx-background-color: white; -fx-background-radius: 10; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 4, 0, 0, 1);"
                                   VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="nameColumn" text="Product Name" prefWidth="400"/>
                                <TableColumn fx:id="priceColumn" text="Price" prefWidth="150"/>
                                <TableColumn fx:id="stockColumn" text="Stock" prefWidth="150"/>
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </VBox>
            </center>
        </BorderPane>
    </children>
</AnchorPane>